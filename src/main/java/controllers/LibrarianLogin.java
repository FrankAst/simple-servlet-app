package controllers;import db.DBConnection;import javax.servlet.ServletContext;import javax.servlet.ServletException;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import javax.servlet.http.HttpSession;import java.io.IOException;import java.util.Map;public class LibrarianLogin extends HttpServlet {    @Override    protected void doPost(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {        ServletContext ctx = req.getServletContext();        DBConnection sq = (DBConnection) ctx.getAttribute("DBConnection");        String query = "select * from librarians where librarians.email='" + req.getParameter("email") + "'";        Map librarian = sq.findOne(query);        if(librarian != null && librarian.get("password") != null && req.getParameter("email")!= null && req.getParameter("password")!= null) {            if (librarian.get("password").equals(req.getParameter("password"))) {                HttpSession httpSession = req.getSession(true);                httpSession.setAttribute("email", req.getParameter("email").toString());                httpSession.setAttribute("role", "librarian");                httpSession.setMaxInactiveInterval(30);                res.sendRedirect("manage.jsp");            } else {                res.getWriter().println("Invalid data");            }        }else {            res.getWriter().println("There is no librarian with this parameters!");        }    }    @Override    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {        request.getRequestDispatcher("librarian.html").forward(request, response);    }}